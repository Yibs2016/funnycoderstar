---
title: draftreact相关
date: 2017-12-18 21:22:43
tags:
---
## react相关
### react优缺点
优点
- 可以通过函数式方法描述视图组件(好处: 相同的输入会得到相同的渲染结果,不会有副作用;组件不会被实例化,整体渲染性能得到提升)
- 集成虚拟DOM(性能好)
- 单向数据流(好处是更容易追踪数据变化排查问题)
- 一切都是component: 代码更加模块化,重用代码更容易,可维护性高
- 大量拥抱es6特性
- jsx
缺点
- jsx的一个问题就是,渲染函数常常包含大量逻辑,最终看着更像是程序员片段,而不是视觉呈现,后期如果发生需求更改,维护起来工作量将是巨大的
- 大而全,上手有难度

DOM diff算法和DOM
React中的render方法,返回一个DOM描述,结果仅仅是轻量级的js对象.Reactjs只有在setState的时候回更新dom,而且是先更新virtual Dom, 然后和实际DOM比较,最后再更新实际DOM

React.js厉害是地方不是说它比DOM快(这句话本来就是错的),而是说不管你数据怎么变化,我都可以以最小的代价来更新DOM.方法就是我在内存里面用新的数据刷新一个虚拟的DOM树,然后新旧DOM树进行比较,找出差异,再更新放到真正的真正的DOM树上.

当我们修改了DOM树上一些节点对应绑定的state,React会立即将它标记为'脏状态'.在事件循环的最后才重新渲染所有的脏节点.在实际的代码中,会对新旧两颗树进行一个深度优先遍历.这样每个节点都会有一个唯一的标记,每遍历到一个节点就把该节点和新的树进行对比.如果有差异的话就记录到一个对象里面,最后把差异应该到真正的DOM树上.算法实现1步骤一: 用JS对象模拟DOM树; 2,步骤二: 比较两颗虚拟DOM树的差异;3,步骤三:把差异应用到真正的DOM树上,这就是所谓的diff算法

