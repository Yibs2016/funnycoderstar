---
title: '数组减去另一数组,数组的每一项都是一个对象'
tags: javascript
tags: javascript
categories: javascript
---
做聊天项目的时候遇要实现这样的一个功能: 邀请新的好友入群;点击邀请好友会弹出一个好友列表,显示你除了在群里面的好友外剩下的所有好友;
我的思路是取到你所有的好友,然后所有好友中过滤掉已经是群成员的好友

```js
const users = [
    {
        _id: 1,
        name: '好友1'
    },
    {
        _id: 2,
        name: '好友1'
    },
    {
        _id: 3,
        name: '好友1'
    },
];
const groupMembers = [
    {
        _id: 1,
        name: '好友1'
    },
    {
        _id: 2,
        name: '好友1'
    },
]
```
现在一步一步来看数组的操作

## 1,两个数组里的每一项分别为元素时
```
const arr1 = ["", "100", "120", "125", "125", "130", "130"];

const arr2 = ["", "120", "125", "125", "130"];

请问如何求得两个数组之差？使得新数组为 arr3 = ["100","130"]

```
### 方法一:
思路:
```js
const arr1 = ["", "120", "125", "125", "130", "130", "130", "130", "130"];

const arr2 = ["", "120", "125", "130"];

for (let i = arr1.length - 1; i >= 0; i--) {
    a = arr1[i];
    for (let j = arr2.length - 1; j >= 0; j--) {
        b = arr2[j];
        if (a == b) {
            arr1.splice(i, 1);
            arr2.splice(j, 1);
            break;
        }
    }
}

console.log(arr1);  // ["125","130","130","130","130"]

```
### 方法二:
思路:将第一个数组存入一个对象，这样就已经去重了；再把第二个数组中的元素当作key从对象中删除。
```js
const m = {};
arr1.forEach(function(al){m[al]=al;})
arr2.forEach(function(bl){delete m[bl];})
console.dir(Object.keys(m))
```
### 方法三:
思路:
```js
const arr1 = ["", "100", "120", "125", "125", "130", "130"];
const arr2 = ["", "120", "125", "125", "130"];
const arr3 = [];
arr1.forEach((a)=>{
    let c = arr2.findIndex(b =>a === b);
    if (c > -1) delete arr2[c];
    else arr3.push(a);
});
console.log(arr3)  //["100", "130"]
```
## 2, arr1中的每一项都是对象,arr2中的每一项都是元素
```
const a = [{ id: 15 }, { id: -1 }, { id: 0 }, { id: 3 }, { id: 12.2 }];
const b = [15, 3];
```
### 方法一
思路
```
a.filter(item => { return !b.includes(item.id); });
或
a.filter(item => { return b.indexOf(item.id) === -1; });
 
```
### 方法二:
```
a=a.filter((x)=>b.every((y)=>y!=x.id))
```
### 方法三:
```js
const a = [{ id: 15 }, { id: -1 }, { id: 0 }, { id: 3 }, { id: 12.2 }];
const b = [15, 3];
for(index in a){
    if(b.indexOf(a[index]["id"])>=0)
        a.splice(index,1);
}
console.log(a);
或
const result = a.filter(function (item) {
    return b.indexOf(item.id) < 0;
 })
```
## 3,arr1中的每一项都是对象,arr2中的每一项也都是对象,现在回到主题
```js
const a = [
    {_id: 1},
    {_id: 2},
    {_id: 3},
];
const b = [
    {_id: 2},
    {_id: 4},
]
```
### 解决方法一:
```js
const c = a.filter(x => !b.find(y => y._id === x._id)); // [ { _id: 1 }, { _id: 3} ]
```
### 解决方法二:
```js
const c = a.filter(x => b.every(y => y._id !== x._id));
```
## 参考
- [数组减去另一个数组](https://segmentfault.com/q/1010000004981935)
- [js 根据一个数组元素，删除另一个数组中的对象](https://segmentfault.com/q/1010000008836875)

